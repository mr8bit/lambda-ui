<!DOCTYPE html>
<html lang="ru">

<head>

    <meta charset="utf-8">

    <title>Title</title>
    <meta name="description" content="">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet">
    <meta property="og:image" content="path/to/image.jpg">
    <link rel="shortcut icon" href="../../img/favicon/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="../../img/favicon/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../img/favicon/apple-touch-icon-114x114.png">

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#000">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#000">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#000">


    <style>body {
        opacity: 0;
        overflow-x: hidden;
    }

    html {
        background-color: #fff;
    }</style>

</head>

<body>

<nav class="navigation-card">
    <div class="navigation-card-container">
        <div class="navigation-card-container__menu">
            <div class="navigation-card-container__menu__sidebar">
                <span class="icon icon-menu"></span>
            </div>

        </div>
        <div class="navigation-card-container__logo">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="97px"
                 height="16px" viewBox="0 0 97 16" version="1.1">
                <g id="Главная" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-weight="700"
                   font-family="Roboto-Black, Roboto" letter-spacing="1.6500001" font-size="22">
                    <g id="Navigate-Card" fill="#4D4D4D">
                        <g>
                            <g id="content">
                                <text id="LAMBDA">
                                    <tspan y="16">LAMBDA</tspan>
                                </text>
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
        </div>
        <div class="navigation-card-container__social">
            <ul class="navigation-card-container__social__list">
                <li class="navigation-card-container__social__list__item">
                    <a class="navigation-card-container__social__list__item__link" href="#">
                        <span class="navigation-card-container__social__list__item__link__icon icon icon-twitter"></span>
                    </a>
                </li>
                <li class="navigation-card-container__social__list__item">
                    <a class="navigation-card-container__social__list__item__link" href="#">
                        <span class="navigation-card-container__social__list__item__link__icon icon icon-instagram"></span>
                    </a>
                </li>
                <li class="navigation-card-container__social__list__item">
                    <a class="navigation-card-container__social__list__item__link" href="#">
                        <span class="navigation-card-container__social__list__item__link__icon icon icon-vk"></span>
                    </a>
                </li>
                <li class="navigation-card-container__social__list__item">
                    <a class="navigation-card-container__social__list__item__link" href="#">
                        <span class="navigation-card-container__social__list__item__link__icon icon icon-github"></span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>


<nav class="navigation-breadcrumb">
    <ol class="navigation-breadcrumb-list">
        <li class="navigation-breadcrumb-list__item">
            <a class="navigation-breadcrumb-list__item__link" href="#">Главная</a>
        </li>
        <li class="navigation-breadcrumb-list__item">
            <a class="navigation-breadcrumb-list__item__link" href="#">Новости</a>
        </li>
        <li class="navigation-breadcrumb-list__item">Крохотный блокчейн на Python в 50 строк</li>
    </ol>
</nav>


<div class="article-header-card" style="background-image: url('../../img/article/cover.jpeg')">
    <div class="article-header-card-content">
        <div class="article-header-card-content-left">
            <div class="article-header-card-content-left-body">
                <div class="article-header-card-content-left-body-head">
                    <span class="label label--danger label--large">ПЕРЕВОД</span>
                    <span class="article-header-card-content-left-body-head_date">24 Янв. 2018  14:34</span>
                </div>
                <h1 class="article-header-card-content-left-body__title">
                    Крохотный блокчейн на Python в 50 строк
                </h1>
                <div class="article-header-card-content-left-body__line"></div>
            </div>
            <div class="article-header-card-content-left-footer">
                <span class="article-header-card-content-left-footer-info">
                    <span class="article-header-card-content-left-footer-info__icon icon icon-eye"></span>
                    <span class="article-header-card-content-left-footer-info__title">275</span>
                </span>
                <span class="article-header-card-content-left-footer-info">
                    <span class="article-header-card-content-left-footer-info__icon icon icon-comment"></span>
                    <span class="article-header-card-content-left-footer-info__title">12</span>

                </span>
                <span class="article-header-card-content-left-footer-info">
                    <span class="article-header-card-content-left-footer-info__icon icon icon-user"></span>
                    <span class="article-header-card-content-left-footer-info__title">Тимур Майзенберг</span>
                </span>
            </div>
        </div>

        <div class="article-header-card-content-right">
            <div class="article-header-card-content-right-info">
                <a class="btn btn--circle btn--gray-30"><span class="icon icon-share icon-flip"></span></a>
                <span class="article-header-card-content-right-info__num">123</span>
            </div>
            <div class="article-header-card-content-right-info">
                <a class="btn btn--circle btn--gray-30"><span class="icon icon-favorite"></span></a>
                <span class="article-header-card-content-right-info__num">123</span>
            </div>
        </div>
    </div>
</div>
<!-- START ARTICLE BODY -->
<div class="article-body">

    <!-- START Текст -->
    <div class="article-body__content">
        <p>Несмотря на то, что некоторые воспринимают блокчейн как волшебную палочку, застывшую в ожидании проблем для
            решения, нет никаких сомнений в том, что эта новая технология -- настоящее чудо в информационном мире. Но
            что же такое блокчейн?
        </p>
        <blockquote>
            <span>Блокчейн - <a
                    href="https://www.google.com/search?q=blockchain+definition&amp;oq=blockchain+definition&amp;aqs=chrome.0.0l6.2941j0j7&amp;sourceid=chrome&amp;ie=UTF-8">Цифровой “блокнот” в котором транзакции, проводимые в системе биткоин (или другой криптовалюты) записываются в хронологическом порядке и публично доступны. (вольный перевод)</a></span>
        </blockquote>
        <p>
            В более общих словах - это публичная база данных, где новые данные хранятся в контейнерах, называемых
            блоками, и добавляются в иммутабельную (неизменяемую) цепочку вместе с данными, добавленными тудав прошлом.
            В случае биткоина и других криптовалют, данными являются группы транзакций. Но, естественно, данные могут
            быть любыми.
        </p>
        <p>
            Технология блокчейна дала толчок новым, полностью цифровым валютам, таким как биткоин и лайткоин которые не
            контролируются и не выпускаются централизованно. Это дает новые свободы тем, кто считает современную
            банковскую систему жульнической. Блокчейн также произвел революцию в системах распределенных вычислений в
            виде таких технологий, как эфириум, которые представили концепт умных контрактов.
        </p>
        <p>
            В этой статье я создам простой блокчейн в несколько десятков строчек кода на Python 3. Он будет называться
            SnakeCoin.
        </p>
        <p>
            Начнем с определения вида нашего блока. В блокчейне каждый блок содержит временную метку и, опционально,
            номер. В SnakeCoin мы будем записывать обе позиции. И чтобы убедиться в целостности всего блокчейна, каждый
            блок будет иметь идентификационный хэш. Как в биткоине, хэш каждого блока будет криптографическим хэшем
            номера блока, его временной метки, данных и хэша предыдущего блока. Ах да, в данными может быть все, что
            угодно :)
        </p>
    </div>
    <!-- END Текст -->

    <!-- START СODE -->
    <pre><code class="hljs python">import hashlib as hasher
class Block:
  def __init__(self, index, timestamp, data, previous_hash):
    self.index = index
    self.timestamp = timestamp
    self.data = data
    self.previous_hash = previous_hash
    self.hash = self.hash_block()

  def hash_block(self):
    sha = hasher.sha256()
    sha.update(str(self.index) +
               str(self.timestamp) +
               str(self.data) +
               str(self.previous_hash))
    return sha.hexdigest()
</code></pre>
    <!-- END СODE -->

    <!-- START Текст -->
    <div class="article-body__content">
        <p>Отлично! У нас есть структура нашего блока, но мы создаем цепочку таких блоков (блокчейн). Нам нужно
            добавлять блоки в некую последовательность. Как я сказал ранее, каждый блок содержит информацию из
            предыдущего блока. Поэтому встает вопрос - как нам добавить самый первый блок? Ну, первый или первородный
            блок (genesis block) - это необычный блок. В большинстве случаев, он добавляется вручную или имеет особую
            логику, позволяющую его добавить.</p>
        <p>
            Мы создадим функцию, которая будет возвращать нам genesis block, чтобы сделать жизнь чуть проще. Этот блок
            будет иметь номер 0 и произвольные данные с произвольным значением хэша “предыдущего блока”.
        </p>
    </div>
    <!-- END Текст -->

    <!-- START СODE -->
    <pre><code class="hljs python">import datetime as date

def create_genesis_block():
  # Вручную создаем блок с нулевым индексом
  # и произвольным хэшем предыдущего блока
  return Block(0, date.datetime.now(), "Genesis Block", "0")
</code></pre>
    <!-- END СODE -->

    <!-- START Текст -->
    <div class="article-body__content">
        <p>Теперь, когда мы можем создать genesis block, нам нужна функция, которая будет создавать следующие блоки в
            цепочке. Эта функция будет принимать предыдущий блок в цепи, как параметр, создавать данные и возвращать
            новый блок с корректными хэшами. Когда новый блок хэширует информацию из предыдущего блока, надежность всей
            цепи увеличивается с каждым новым блоком. Если этого не делать, злоумышленникам будет проще “изменить
            прошлое” и заменить нашу цепочку их собственной. Цепь хэшей играет роль криптографического доказательства и
            дает гарантию, что однажды добавленный в блокчейн блок нельзя будет изменить или вовсе удалить.</p>
    </div>
    <!-- END Текст -->

    <!-- START СODE -->
    <pre><code class="hljs python">def next_block(last_block):
  this_index = last_block.index + 1
  this_timestamp = date.datetime.now()
  this_data = "Hey! I'm block " + str(this_index)
  this_hash = last_block.hash
  return Block(this_index, this_timestamp, this_data, this_hash)
</code></pre>
    <!-- END СODE -->

    <!-- START Текст -->
    <div class="article-body__content">
        <p>Это большая часть сложной работы. Теперь можем запустить наш блокчейн! В нашем случае, это будет простой
            питоновский список (list). Первым элементом будет наш первородный блок (genesis block). И, конечно, нам
            нужно добавить последующие блоки. Так как SnakeCoin - это крохотный блокчейн, мы добавим всего 20 новых
            блоков. Можем сделать это в цикле.</p>
    </div>
    <!-- END Текст -->

    <!-- START СODE -->
    <pre><code class="hljs python"># создаем блокчейн и первый блок
blockchain = [create_genesis_block()]
previous_block = blockchain[0]

# определяем количество блоков,
# которые добавим после первого
num_of_blocks_to_add = 20

# добавим блоки в цепь
for block in range(0, num_of_blocks_to_add):
  block_to_add = next_block(previous_block)
  blockchain.append(block_to_add)
  previous_block = block_to_add
  # расскажем всем об этом!
  print "Блок #{} был добавлен в блокчейн!".format(block_to_add.index)
  print "Хэш: {}\n".format(block_to_add.hash)
</code></pre>
    <!-- END СODE -->

    <!-- START Текст -->
    <div class="article-body__content">
        <p>Давайте посмотрим, что же мы наделали.</p>

        <img src="../../img/article/1*njl6-UdLUWTLRFsHc4D-tA.png" alt="">

        <p>Не переживай. Добавятся все 20 блоков :)</p>

        <p> Отлично, наш блокчейн работает! Если хочешь увидеть больше информации о каждом блоке, можешь запустить
            полный
            исходный текст в консоли.</p>

        <p> В принципе, это все, что SnakeCoin имеет сейчас предложить. Чтобы сделать SnakeCoin пригодным для
            использования
            в современных условиях индустрии, в него нужно добавить множество фичей, например: сервер, отслеживающий
            цепочку
            на нескольких машинах и алгоритм proof-of-work, чтобы ограничить количество блоков, добавляемых за
            определенный
            промежуток времени.</p>

        <p> Если хочется больше технических подробностей, то можно прочитать оригинальный доклад Биткоина здесь. Удачи и
            веселого хакинга!</p>
        <blockquote>
            <span style="font-size:16px">Перевод статьи&nbsp;<a
                    href="https://medium.com/crypto-currently/lets-build-the-tiniest-blockchain-e70965a248b">Let’s Build the Tiniest Blockchain In Less Than 50 Lines of&nbsp;Python</a>&nbsp;от <a
                    href="http://www.aunyks.com/">Gerald Nash</a></span>
        </blockquote>
    </div>
    <!-- END Текст -->

</div>
<!-- END ARTICLE BODY -->

<!-- START ARTICLE FOOTER -->
<div class="article-footer">
    <div class="article-footer__top">
        <div class="article-footer-author">
            <img src="../../img/article/avatar.png" class="article-footer-author__avatar">
            <div class="article-footer-author__info">
                <span class="article-footer-author__name">Тимур Майзенберг</span>
                <span class="article-footer-author__position">Основатель</span>
            </div>
        </div>
        <div class="article-footer-about_article">
            <div class="article-footer-about_article__item">
                <a class="article-footer-about_article__link" href="#">
                    <span class="icon icon-faovrite-solid"></span>
                </a>
                <span class="article-footer-about_article__num">122</span>
            </div>
            <div class="article-footer-about_article__item">
                <span class="article-footer-about_article__icon icon icon-eye"></span>
                <span class="article-footer-about_article__num">122</span>
            </div>
            <div class="article-footer-about_article__item">
                <span class="article-footer-about_article__icon icon icon-comment"></span>
                <span class="article-footer-about_article__num">122</span>
            </div>
        </div>
        <div class="article-footer-go_top">
            <span class="btn btn--ghost btn--default article-footer-go_top__btn">
                <span class="article-footer-go_top__name">Наверх</span>
                <span class="icon icon-arrow-top-15--gray"></span>
            </span>
        </div>
    </div>
    <div class="article-footer__bottom">
        <div class="article-footer-tags">
            <a href="#" class="article-footer-tags__link label label--default">codegasm</a>
            <a href="#" class="article-footer-tags__link label label--default">code</a>
            <a href="#" class="article-footer-tags__link label label--default">ML</a>
            <a href="#" class="article-footer-tags__link label label--default">python</a>
        </div>
        <div class="article-footer-share">
            <span class="article-footer-share__name">Поделиться:</span>
            <div  class="article-footer-share__social">
               <a href="#" class="article-footer-share__link">
                   <span class="article-footer-share__icon icon icon-twitter"></span>
               </a>
                <span class="article-footer-share__num">10</span>
            </div>
            <div  class="article-footer-share__social">
               <a href="#" class="article-footer-share__link">
                   <span class="article-footer-share__icon icon icon-vk"></span>
               </a>
                <span class="article-footer-share__num">10</span>
            </div>

        </div>
    </div>
</div>
<!-- END ARTICLE FOOTER -->


<div class="head">
    <h3 class="head__title">Популярные статьи</h3>
    <div class="head__line"></div>
</div>

<div class="container">
    <div class="card card--mini">
        <div class="card-head--event--mini">
			<span class="card-head__tag card-head__tag--middle ">
				лекции
			</span>
            <img class="card__img card__img--mini" src="../../img/card/event_middle.png">
        </div>
        <div class="card-body card-body--mini">
            <div class="card-body__title card-body__title--mini">
                Эволюция паролей:путеводитель по аутентификации…
            </div>
        </div>

        <div class="card-footer card-footer--middle">
            <div class="card-footer__datetime card-footer__datetime--middle">
                24 Янв. 15:40
            </div>
            <div class="card-footer__countcomment card-footer__countcomment--middle">
                <span class="icon icon-close-comment-24--gray"></span>
                <span class="card-footer__countcomment__number">12</span>
            </div>
        </div>
    </div>
    <div class="card card--mini">
        <div class="card-head--event--mini">
			<span class="card-head__tag card-head__tag--middle ">
				лекции
			</span>
            <img class="card__img card__img--mini" src="../../img/card/event_middle.png">
        </div>
        <div class="card-body card-body--mini">
            <div class="card-body__title card-body__title--mini">
                Эволюция паролей:путеводитель по аутентификации…
            </div>
        </div>

        <div class="card-footer card-footer--middle">
            <div class="card-footer__datetime card-footer__datetime--middle">
                24 Янв. 15:40
            </div>
            <div class="card-footer__countcomment card-footer__countcomment--middle">
                <span class="icon icon-close-comment-24--gray"></span>
                <span class="card-footer__countcomment__number">12</span>
            </div>
        </div>
    </div>
    <div class="card card--mini">
        <div class="card-head--event--mini">
			<span class="card-head__tag card-head__tag--middle ">
				лекции
			</span>
            <img class="card__img card__img--mini" src="../../img/card/event_middle.png">
        </div>
        <div class="card-body card-body--mini">
            <div class="card-body__title card-body__title--mini">
                Эволюция паролей:путеводитель по аутентификации…
            </div>
        </div>

        <div class="card-footer card-footer--middle">
            <div class="card-footer__datetime card-footer__datetime--middle">
                24 Янв. 15:40
            </div>
            <div class="card-footer__countcomment card-footer__countcomment--middle">
                <span class="icon icon-close-comment-24--gray"></span>
                <span class="card-footer__countcomment__number">12</span>
            </div>
        </div>
    </div>

</div>
<!-- END Навигация  -->


<footer class="footer">
    <div class="footer-container">
        <div class="footer-container-item">
            <div class="footer-container-item__logo">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="97px"
                     height="16px" viewBox="0 0 97 16" version="1.1">
                    <g id="Главная" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-weight="700"
                       font-family="Roboto-Black, Roboto" letter-spacing="1.6500001" font-size="22">
                        <g id="Navigate-Card" fill="#4D4D4D">
                            <g>
                                <g id="content">
                                    <text id="LAMBDA">
                                        <tspan y="16">LAMBDA</tspan>
                                    </text>
                                </g>
                            </g>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="footer-container-item__policy">
                Privacy Policy
            </div>
            <div class="footer-container-item__policy">
                © 2017 Lambda Co.
            </div>
        </div>
        <div class="footer-container-item">
            <div class="footer-container-item__head">Навигация</div>
            <ul class="footer-container-item__menu">
                <li class="footer-container-item__menu__item">
                    <a class="footer-container-item__menu__item__link" href="#">Главная</a>
                </li>
                <li class="footer-container-item__menu__item">
                    <a class="footer-container-item__menu__item__link" href="#">Публикации</a>
                </li>
                <li class="footer-container-item__menu__item">
                    <a class="footer-container-item__menu__item__link" href="#">Мероприятия</a>
                </li>
                <li class="footer-container-item__menu__item">
                    <a class="footer-container-item__menu__item__link" href="#">Партнеры</a>
                </li>
                <li class="footer-container-item__menu__item">
                    <a class="footer-container-item__menu__item__link" href="#">О нас</a>
                </li>
            </ul>
        </div>
        <div class="footer-container-item">
            <div class="footer-container-item__head">Контакты</div>
            <div class="footer-container-item__contacts">
                <a class="footer-container-item__contacts__phone" href="#">8 800 555 35 35</a>
                <a class="footer-container-item__contacts__mail" href="#">info@lambda-it.ru</a>
            </div>
            <div class="footer-container-item__border"></div>
            <div class="footer-container-item__social">
                <ul class="footer-container-item__social__list">
                    <li class="footer-container-item__social__list__item">
                        <a class="footer-container-item__social__list__item__link" href="#">
                            <span class="footer-container-item__social__list__item__link__icon icon icon-twitter"></span>
                        </a>
                    </li>
                    <li class="footer-container-item__social__list__item">
                        <a class="footer-container-item__social__list__item__link" href="#">
                            <span class="footer-container-item__social__list__item__link__icon icon icon-instagram"></span>
                        </a>
                    </li>
                    <li class="footer-container-item__social__list__item">
                        <a class="footer-container-item__social__list__item__link" href="#">
                            <span class="footer-container-item__social__list__item__link__icon icon icon-vk"></span>
                        </a>
                    </li>
                    <li class="footer-container-item__social__list__item">
                        <a class="footer-container-item__social__list__item__link" href="#">
                            <span class="footer-container-item__social__list__item__link__icon icon icon-github"></span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- END Навигация  -->


<link rel="stylesheet" href="../../css/main.min.css">
<link rel="stylesheet" href="../../libs/normalize-css/normalize.css">
<script src="../../js/scripts.min.js"></script>

<link rel="stylesheet" href="../../libs/highlight/styles/darcula.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


</body>
</html>
